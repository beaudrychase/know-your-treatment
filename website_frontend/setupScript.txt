# setup new EC2 instance

# update system
sudo yum update -y
sudo yum install -y git htop

# install nvm
curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash
. ~/.nvm/nvm.sh
nvm install --lts
node -e "console.log('Running Node.js ' + process.version)"

# clone our website
git clone https://gitlab.com/cmibarnwell/idb-project-swe
# enter username/password

# store git credentials
cd idb*
git config credential.helper store
git pull
# enter username/password
cd ~

# setup update script
cp idb*/*front*/update.sh .
chmod +x update.sh

# setup routing config to allow access to site
sudo iptables -N PREROUTING
sudo iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 80 -j REDIRECT --to-ports 5000

# use ~/update.sh to update and run site
